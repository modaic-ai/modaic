---
title: modaic.databases.vector_database.vendors.milvus
---

## MilvusBackend

```python
class MilvusBackend()
```

#### \_\_init\_\_

```python
def __init__(uri: str = "http://localhost:19530",
             user: str = "",
             password: str = "",
             db_name: str = "",
             token: str = "",
             timeout: Optional[float] = None,
             **kwargs)
```

Initialize a Milvus vector database.

#### create\_record

```python
def create_record(embedding_map: Dict[str, np.ndarray],
                  context: Context) -> Any
```

Convert a Context to a record for Milvus.

#### add\_records

```python
def add_records(collection_name: str, records: List[Any])
```

Add records to a Milvus collection.

#### drop\_collection

```python
def drop_collection(collection_name: str)
```

Drop a Milvus collection.

#### create\_collection

```python
def create_collection(collection_name: str,
                      payload_schema: Dict[str, SchemaField],
                      index: IndexConfig = IndexConfig())
```

Create a Milvus collection.

#### has\_collection

```python
def has_collection(collection_name: str) -> bool
```

Check if a collection exists in Milvus.

Params:
client: The Milvus client instance
collection_name: The name of the collection to check

**Returns**:

- `bool` - True if the collection exists, False otherwise

#### search

```python
def search(collection_name: str,
           vector: np.ndarray | List[int],
           payload_schema: Type[BaseModel],
           k: int = 10,
           filter: Optional[dict] = None,
           index_name: Optional[str] = None) -> List[SearchResult]
```

Retrieve records from the vector database.

#### mql\_to\_milvus

```python
def mql_to_milvus(mql: Dict[str, Any]) -> str
```

Convert a Modaic Query Language (MQL) filter into a Milvus boolean expression string.

Params:
mql: A dictionary representing the MQL filter. Supports logical operators
like `$and`, `$or`, `$not` and comparison operators like `$eq`, `$ne`,
`$gt`, `$gte`, `$lt`, `$lte`, `$in`, `$or`0, `$or`1, `$or`2.
JSON nested fields can be expressed using dot notation, e.g.,
`$or`3.

**Returns**:

  The equivalent Milvus filter expression string.

