---
title: Table
description: The Table Context Classes
---

## BaseTable

```python
class BaseTable(Context, ABC)
```

#### column\_samples

```python
def column_samples(col: str) -> list[Any]
```

Return up to 3 distinct sample values from the given column.

Picks at most three unique, non-null, short (<64 chars) values from
the column, favoring speed by sampling after de-duplicating values.

**Arguments**:

- `col` - Column name to sample from.
  

**Returns**:

  A list with up to three JSON-serializable sample values.

#### get\_col

```python
def get_col(col_name: str) -> pd.Series
```

Gets a single column from the table.

**Arguments**:

- `col_name` - Name of the column to get
  

**Returns**:

  The specified column as a pandas Series.

#### query

```python
def query(query: str) -> pd.DataFrame
```

Queries the table using DuckDB SQL.

**Notes**:

  - Refer to the in-memory table as `this` (alias `This`).
  

**Example**:

```python
# Select a few rows
df = table.query("SELECT * FROM this LIMIT 5")

# Aggregate over a column
df = table.query("SELECT category, COUNT(*) AS n FROM this GROUP BY category")
```

#### embedme

```python
def embedme() -> str
```

embedme method for table. Returns a markdown representation of the table.

#### markdown

```python
def markdown() -> str
```

Converts the table to markdown format.
Returns a markdown representation of the table with the table name as header.

#### to\_text

```python
def to_text() -> Text
```

Converts the table to markdown and returns a Text context object.

## TableFile

```python
class TableFile(BaseTable)
```

A Context object to represent table documents such as excel, csv and tsv files.

#### column\_samples

```python
@requires_hydration
def column_samples(col: str) -> list[Any]
```

Returns up to 3 distinct sample values from the given column.

#### get\_col

```python
@requires_hydration
def get_col(col_name: str) -> pd.Series
```

Gets a single column from the table.

#### schema\_info

```python
@requires_hydration
def schema_info() -> dict[str, Any]
```

Returns the schema information of the table.

#### query

```python
@requires_hydration
def query(query: str) -> pd.DataFrame
```

Queries the table using DuckDB SQL.

#### embedme

```python
@requires_hydration
def embedme() -> str
```

Converts the table to markdown and returns a Text context object.

#### markdown

```python
@requires_hydration
def markdown() -> str
```

Converts the table to markdown format.

#### to\_text

```python
@requires_hydration
def to_text() -> Text
```

Converts the table to markdown and returns a Text context object.

## BaseTabbedTable

```python
class BaseTabbedTable(Context)
```

#### init\_sql

```python
def init_sql()
```

Initilizes and in memory sql database for querying

#### close\_sql

```python
def close_sql()
```

Closes the in memory sql database

#### query

```python
def query(query: str)
```

Queries the in memory sql database

#### sanitize\_name

```python
def sanitize_name(original_name: str) -> str
```

Sanitizes names of files and directories.

Rules:
1. Remove file extension
2. Replace illegal characters with underscores
3. Replace consecutive consecutive underscores/illegal charachters with a single underscore
4. Replace - with _
5. no caps
4. remove leading/trailing underscores
5. if name starts with a number, add t_
6. if name is longer than 64 chars, truncate and add a hash suffix

**Arguments**:

- `original_name` - The name to sanitize.
  

**Returns**:

  The sanitized name.

#### is\_valid\_table\_name

```python
def is_valid_table_name(name: str) -> bool
```

Checks if a name is a valid table name.

**Arguments**:

- `name` - The name to validate.
  

**Returns**:

  True if the name is valid, False otherwise.

#### downcast\_column

```python
def downcast_column(col: pd.Series) -> pd.Series
```

Downcasts a column to the smallest possible dtype.

